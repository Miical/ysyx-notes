# 最后连接语义

Chisel允许您使用:=操作符连接组件，如果发出多个连接语句。当这种情况发生时，会选用最后一次连接

```scala
class LastConnect extends Module {
  val io = IO(new Bundle {
    val in = Input(UInt(4.W))
    val out = Output(UInt(4.W))
  })
  io.out := 1.U
  io.out := 2.U
  io.out := 3.U
  io.out := 4.U
}

//  Test LastConnect
test(new LastConnect) { c => c.io.out.expect(4.U) } // Assert that the output correctly has 4
println("SUCCESS!!") // Scala Code: if we get here, our tests passed!
```

# `when`, `elsewhen`, and `otherwise`

```scala
when(someBooleanCondition) {
  // things to do when true
}.elsewhen(someOtherBooleanCondition) {
  // things to do on this condition
}.otherwise {
  // things to do if none of th boolean conditions are true
}
```

与Scala的if不同，与when相关的块不会返回值。

```scala
// Max3 returns the max of its 3 arguments
class Max3 extends Module {
  val io = IO(new Bundle {
    val in1 = Input(UInt(16.W))
    val in2 = Input(UInt(16.W))
    val in3 = Input(UInt(16.W))
    val out = Output(UInt(16.W))
  })
    
  when(io.in1 >= io.in2 && io.in1 >= io.in3) {
    io.out := io.in1  
  }.elsewhen(io.in2 >= io.in3) {
    io.out := io.in2 
  }.otherwise {
    io.out := io.in3
  }
}

// --

module Max3(
  input         clock,
  input         reset,
  input  [15:0] io_in1,
  input  [15:0] io_in2,
  input  [15:0] io_in3,
  output [15:0] io_out
);
  wire [15:0] _GEN_0 = io_in2 >= io_in3 ? io_in2 : io_in3; // @[cmd3.sc 11:32 cmd3.sc 12:12 cmd3.sc 14:12]
  assign io_out = io_in1 >= io_in2 & io_in1 >= io_in3 ? io_in1 : _GEN_0; // @[cmd3.sc 9:46 cmd3.sc 10:12]
endmodule
```



